function bindClass(e,i){$(e).each(function(e,t){$(t).mouseenter(function(){$(this).addClass(i)}),$(t).mouseleave(function(){$(this).removeClass(i)})})}function getHTMLButton(e,i){}bindClass(".item.gd","tossing"),bindClass(".item.gp","pulse"),bindClass(".item.vd","floating");var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(e,i){var t=this,s=arguments,n=function(){e.type="debouncedresize",$event.dispatch.apply(t,s)};resizeTimeout&&clearTimeout(resizeTimeout),i?n():resizeTimeout=setTimeout(n,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(e){function h(){var s=$(r),a=$(d);t&&(d.length?t.reject(n,s,a):t.resolve(n)),$.isFunction(e)&&e.call(i,n,s,a)}function o(e,i){e.src!==BLANK&&-1===$.inArray(e,a)&&(a.push(e),i?d.push(e):r.push(e),$.data(e,"imagesLoaded",{isBroken:i,src:e.src}),s&&t.notifyWith($(e),[i,n,$(r),$(d)]),n.length===a.length&&(setTimeout(h),n.unbind(".imagesLoaded")))}var i=this,t=$.isFunction($.Deferred)?$.Deferred():0,s=$.isFunction(t.notify),n=i.find("img").add(i.filter("img")),a=[],r=[],d=[];return $.isPlainObject(e)&&$.each(e,function(i,s){"callback"===i?e=s:t&&t[i](s)}),n.length?n.bind("load.imagesLoaded error.imagesLoaded",function(e){o(e.target,"error"===e.type)}).each(function(e,i){var t=i.src,s=$.data(i,"imagesLoaded");return s&&s.src===t?void o(i,s.isBroken):i.complete&&"undefined"!==i.naturalWidth?void o(i,0===i.naturalWidth||0===i.naturalHeight):void((i.readyState||i.complete)&&(i.src=BLANK,i.src=t))}):h(),t?t.promise(i):i};var Grid=function(){function x(e){w=$.extend(!0,{},w,e),n.imagesLoaded(function(){y(!0),C(),T()})}function A(e){a=a.add(e),e.each(function(){var e=$(this);e.data({offsetTop:e.offset().top,height:e.height()})}),I(e)}function y(e){a.each(function(){var i=$(this);i.data("offsetTop",i.offset().top),e&&i.data("height",i.height())})}function T(){I(a)}function I(e){e.on("click",".og-close",function(){return E(),!1}).children(".item").on("click",function(e){var i=$(this).parent();return h===i.index()?E():k(i),!1})}function C(){p={width:c.width(),height:c.height()}}function k(e){var i=$.data(this,"preview"),t=e.data("offsetTop");if(f=0,"undefined"!=typeof i){if(o===t)return i.update(e),!1;t>o&&(f=i.height),E()}o=t,i=$.data(this,"preview",new z(e)),i.open()}function E(){h=-1;var e=$.data(this,"preview");e.close(),$.removeData(this,"preview")}function z(e){this.$item=e,this.expandedIdx=this.$item.index(),this.create(),this.update()}for(var e=document.querySelectorAll(".gonext"),i=0;i<e.length;i++)$(e[i]).on("click",{target:$(e[i]).attr("local")},function(e){$("body").scrollTo(e.data.target,1e3)});var p,w,t=$(".blueprints .slider"),n=($(".blueprints .stack"),$("#og-grid")),a=n.children("li"),r=!1,d="600",h=-1,o=-1,f=0,l=10,c=$(window),u=$("html, body"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},m=g[Modernizr.prefixed("transition")],v=Modernizr.csstransitions,b=700;return c.width()<768&&(r=!0,d="300"),c.width()>=830&&c.width()<1024&&(b=600),c.width()>=640&&c.width()<830&&(b=450),c.width()<640&&(b=c.height()<=360?450:750),w={minHeight:b,speed:350,easing:"ease"},z.prototype={create:function(){this.$title=$("<h3></h3>"),this.$description=$("<p></p>"),this.$href=$('<a class="website-link" target="_blank" href="#">Visit website</a>'),this.$trailer=$('<div class="morph-button morph-button-modal morph-button-modal-4 morph-button-fixed"> <button type="button">Watch the Trailer</button> <div class="morph-content"> <div class="trailer_wrapper"><span class="icon icon-close">Close the dialog</span><iframe class="trailer" width="640" height="360" src="" frameborder="0" allowfullscreen></iframe></div></div></div><script>$(".morph-button").click(function(){$(this).toggleClass("active open")});</script>'),this.$details=$('<div class="og-details"></div>').append(this.$title,this.$description,this.$trailer,this.$href),this.$loading=$('<div class="fa fa-circle-o-notch fa-spin"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<div class="fa fa-times fa-2x og-close"></div>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),v&&this.setTransition()},update:function(e){if(this.$loading.show(),e&&(this.$item=e),-1!==h){var i=a.eq(h);i.removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()}h=this.$item.index();var t=this.$item.children(".item"),s={href:t.data("link"),dhref:t.data("dlink"),trailer:t.data("trailer"),largesrc:t.attr("src"),title:t.data("name"),projectname:t.data("name"),description:t.data("description")};this.$title.html(s.title),this.$description.html(s.description),this.$href.attr("href",s.href);var n=this;"undefined"!=typeof n.$largeImg&&n.$largeImg.remove(),t.hasClass("vd")&&n.$details.addClass("vd"),t.hasClass("gd")&&n.$details.addClass("gd"),t.hasClass("gp")&&n.$details.addClass("gp");t.parent().parent().parent().parent().find("> a").attr("data-name");"undefined"!=typeof s.trailer?(n.$trailer.find(".trailer").attr("src",s.trailer),n.$trailer.find("button").text(s.projectname+" trailer"),n.$trailer.show()):n.$trailer.hide(),"undefined"!=typeof s.href?(n.$href.attr("href",s.href),n.$href.text("Visit "+s.projectname),n.$href.show()):"undefined"!=typeof s.dhref?(n.$href.attr("href",s.dhref),n.$href.text("Get "+s.projectname),n.$href.show()):n.$href.hide(),this.createSlider(t)},createSlider:function(e){var i=this.$previewInner.find(".slider");"undefined"==typeof i.find("img").get(0)&&(i=t.clone(!1,!1));var s=e.data("src").lastIndexOf("/")+1,n=e.data("src").substring(s);n=n.substring(0,n.length-4);var a=e.data("src").substring(0,e.data("src").lastIndexOf("/")+1),r=n.substring(0,n.indexOf("_"));if(i.attr("id",r+"-slider"),i=this.replaceSliderImgs(i,a,r,d),"undefined"!=typeof i.get(0)){var h=this.$previewInner.find("script");"undefined"!=typeof h&&$(h).remove(),"undefined"!=typeof this.$fullimage&&this.$fullimage.remove(),"undefined"!=typeof this.$previewInner.find(".slider").get(0)?this.$previewInner.find(".slider").replaceWith(i):this.$previewInner.prepend(i),$("#"+i.attr("id")).Slider()}},replaceSliderImgs:function(e,i,t,s){return $(e).find("img").each(function(e,n){$(n).parent().find("i").remove(),$(n).attr("src",i+t+"_"+s+"_"+e+".jpg")}),e},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var e=this,i=function(){v&&$(this).off(m),e.$item.removeClass("og-expanded"),e.$previewEl.remove()};return setTimeout($.proxy(function(){"undefined"!=typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var e=a.eq(this.expandedIdx),t=this.$item.data("height");void 0==t&&(t=e.css("height")),this.expandedIdx>=a.length&&(e=a.eq(this.expandedIdx+h)),e.css("height",t).on(m,i),v||i.call()},this),25),!1},calcHeight:function(){p.height-this.$item.data("height")-l,p.height;this.height=w.minHeight,this.itemHeight=w.minHeight+this.$item.data("height")},setHeights:function(){var e=this,i=function(){v&&e.$item.off(m),e.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(m,i),v||i.call()},positionPreview:function(){var e=this.$item.data("offsetTop"),i=this.$previewEl.offset().top-f,t=this.height+this.$item.data("height")+l<=p.height?e:this.height<p.height?i-(p.height-this.height):i;u.animate({scrollTop:t},w.speed)},setTransition:function(){this.$previewEl.css("transition","height "+w.speed+"ms "+w.easing),this.$item.css("transition","height "+w.speed+"ms "+w.easing)},getEl:function(){return this.$previewEl}},{init:x,addItems:A}}();