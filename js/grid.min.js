function getHTMLButton(a){}var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(a,b){var c=this,d=arguments,e=function(){a.type="debouncedresize",$event.dispatch.apply(c,d)};resizeTimeout&&clearTimeout(resizeTimeout),b?e():resizeTimeout=setTimeout(e,$special.threshold)},threshold:250};var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";$.fn.imagesLoaded=function(a){function i(){var d=$(g),f=$(h);c&&(h.length?c.reject(e,d,f):c.resolve(e)),$.isFunction(a)&&a.call(b,e,d,f)}function j(a,b){a.src!==BLANK&&-1===$.inArray(a,f)&&(f.push(a),b?h.push(a):g.push(a),$.data(a,"imagesLoaded",{isBroken:b,src:a.src}),d&&c.notifyWith($(a),[b,e,$(g),$(h)]),e.length===f.length&&(setTimeout(i),e.unbind(".imagesLoaded")))}var b=this,c=$.isFunction($.Deferred)?$.Deferred():0,d=$.isFunction(c.notify),e=b.find("img").add(b.filter("img")),f=[],g=[],h=[];return $.isPlainObject(a)&&$.each(a,function(b,d){"callback"===b?a=d:c&&c[b](d)}),e.length?e.bind("load.imagesLoaded error.imagesLoaded",function(a){j(a.target,"error"===a.type)}).each(function(a,b){var c=b.src,d=$.data(b,"imagesLoaded");return d&&d.src===c?void j(b,d.isBroken):b.complete&&"undefined"!==b.naturalWidth?void j(b,0===b.naturalWidth||0===b.naturalHeight):void((b.readyState||b.complete)&&(b.src=BLANK,b.src=c))}):i(),c?c.promise(b):b};var Grid=function(){function u(a){s=$.extend(!0,{},s,a),e.imagesLoaded(function(){w(!0),z(),x()})}function v(a){f=f.add(a),a.each(function(){var a=$(this);a.data({offsetTop:a.offset().top,height:a.height()})}),y(a)}function w(a){f.each(function(){var b=$(this);b.data("offsetTop",b.offset().top),a&&b.data("height",b.height())})}function x(){y(f)}function y(a){a.on("click",".og-close",function(){return B(),!1}).children(".item").on("click",function(){var b=$(this).parent();return i===b.index()?B():A(b),!1})}function z(){n={width:m.width(),height:m.height()}}function A(a){var b=$.data(this,"preview"),c=a.data("offsetTop");if(k=0,"undefined"!=typeof b){if(j===c)return b.update(a),!1;c>j&&(k=b.height),B()}j=c,b=$.data(this,"preview",new C(a)),b.open()}function B(){i=-1;var a=$.data(this,"preview");a.close(),$.removeData(this,"preview")}function C(a){this.$item=a,this.expandedIdx=this.$item.index(),this.create(),this.update()}for(var a=document.querySelectorAll(".gonext"),b=0;b<a.length;b++)$(a[b]).on("click",{target:$(a[b]).attr("local")},function(a){$("body").scrollTo(a.data.target,1e3)});var n,s,c=$(".blueprints .slider"),e=($(".blueprints .stack"),$("#og-grid")),f=e.children("li"),g=!1,h="600",i=-1,j=-1,k=0,l=10,m=$(window),o=$("html, body"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},q=p[Modernizr.prefixed("transition")],r=Modernizr.csstransitions,t=700;return m.width()<768&&(g=!0,h="300"),m.width()>=830&&m.width()<1024&&(t=600),m.width()>=640&&m.width()<830&&(t=450),m.width()<640&&(t=m.height()<=360?450:750),s={minHeight:t,speed:350,easing:"ease"},C.prototype={create:function(){this.$title=$("<h3></h3>"),this.$description=$("<p></p>"),this.$href=$('<a class="website-link" target="_blank" href="#">Visit website</a>'),this.$trailer=$('<div class="morph-button morph-button-modal morph-button-modal-4 morph-button-fixed"> <button type="button">Watch the Trailer</button> <div class="morph-content"> <div class="trailer_wrapper"><span class="icon icon-close">Close the dialog</span><iframe class="trailer" width="640" height="360" src="" frameborder="0" allowfullscreen></iframe></div></div></div><script>$(".morph-button").click(function(){$(this).toggleClass("active open")});</script>'),this.$details=$('<div class="og-details"></div>').append(this.$title,this.$description,this.$trailer,this.$href),this.$loading=$('<div class="fa fa-circle-o-notch fa-spin"></div>'),this.$fullimage=$('<div class="og-fullimg"></div>').append(this.$loading),this.$closePreview=$('<div class="fa fa-times fa-2x og-close"></div>'),this.$previewInner=$('<div class="og-expander-inner"></div>').append(this.$closePreview,this.$fullimage,this.$details),this.$previewEl=$('<div class="og-expander"></div>').append(this.$previewInner),this.$item.append(this.getEl()),r&&this.setTransition()},update:function(a){if(this.$loading.show(),a&&(this.$item=a),-1!==i){var b=f.eq(i);b.removeClass("og-expanded"),this.$item.addClass("og-expanded"),this.positionPreview()}i=this.$item.index();var c=this.$item.children(".item"),d={href:c.data("link"),dhref:c.data("dlink"),trailer:c.data("trailer"),largesrc:c.attr("src"),title:c.data("name"),projectname:c.data("name"),description:c.data("description")};this.$title.html(d.title),this.$description.html(d.description),this.$href.attr("href",d.href);var e=this;"undefined"!=typeof e.$largeImg&&e.$largeImg.remove(),c.hasClass("vd")&&e.$details.addClass("vd"),c.hasClass("gd")&&e.$details.addClass("gd"),c.hasClass("gp")&&e.$details.addClass("gp");c.parent().parent().parent().parent().find("> a").attr("data-name");"undefined"!=typeof d.trailer?(e.$trailer.find(".trailer").attr("src",d.trailer),e.$trailer.find("button").text(d.projectname+" trailer"),e.$trailer.show()):e.$trailer.hide(),"undefined"!=typeof d.href?(e.$href.attr("href",d.href),e.$href.text("Visit "+d.projectname),e.$href.show()):"undefined"!=typeof d.dhref?(e.$href.attr("href",d.dhref),e.$href.text("Get "+d.projectname),e.$href.show()):e.$href.hide(),this.createSlider(c)},createSlider:function(a){var b=this.$previewInner.find(".slider");"undefined"==typeof b.find("img").get(0)&&(b=c.clone(!1,!1));var d=a.data("src").lastIndexOf("/")+1,e=a.data("src").substring(d);e=e.substring(0,e.length-4);var f=a.data("src").substring(0,a.data("src").lastIndexOf("/")+1),g=e.substring(0,e.indexOf("_"));if(b.attr("id",g+"-slider"),b=this.replaceSliderImgs(b,f,g,h),"undefined"!==typeof b.get(0)){var i=this.$previewInner.find("script");"undefined"!==typeof i&&$(i).remove(),"undefined"!==typeof this.$fullimage&&this.$fullimage.remove(),"undefined"!==typeof this.$previewInner.find(".slider").get(0)?this.$previewInner.find(".slider").replaceWith(b):this.$previewInner.prepend(b),$("#"+b.attr("id")).Slider()}},replaceSliderImgs:function(a,b,c,d){return $(a).find("img").each(function(a,e){$(e).parent().find("i").remove(),$(e).attr("src",b+c+"_"+d+"_"+a+".jpg")}),a},open:function(){setTimeout($.proxy(function(){this.setHeights(),this.positionPreview()},this),25)},close:function(){var a=this,b=function(){r&&$(this).off(q),a.$item.removeClass("og-expanded"),a.$previewEl.remove()};return setTimeout($.proxy(function(){"undefined"!==typeof this.$largeImg&&this.$largeImg.fadeOut("fast"),this.$previewEl.css("height",0);var a=f.eq(this.expandedIdx);a.css("height",a.data("height")).on(q,b),r||b.call()},this),25),!1},calcHeight:function(){n.height-this.$item.data("height")-l,n.height;this.height=s.minHeight,this.itemHeight=s.minHeight+this.$item.data("height")},setHeights:function(){var a=this,b=function(){r&&a.$item.off(q),a.$item.addClass("og-expanded")};this.calcHeight(),this.$previewEl.css("height",this.height),this.$item.css("height",this.itemHeight).on(q,b),r||b.call()},positionPreview:function(){var a=this.$item.data("offsetTop"),b=this.$previewEl.offset().top-k,c=this.height+this.$item.data("height")+l<=n.height?a:this.height<n.height?b-(n.height-this.height):b;o.animate({scrollTop:c},s.speed)},setTransition:function(){this.$previewEl.css("transition","height "+s.speed+"ms "+s.easing),this.$item.css("transition","height "+s.speed+"ms "+s.easing)},getEl:function(){return this.$previewEl}},{init:u,addItems:v}}();